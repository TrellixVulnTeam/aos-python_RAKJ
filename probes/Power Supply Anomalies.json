{
  "label": "Power Supply Anomalies",
  "processors": [
    {
      "inputs": {},
      "type": "generic_data_collector",
      "name": "power_supply_count_processor",
      "outputs": {
        "out": "power_supply_count"
      },
      "properties": {
        "graph_query": "node('system', name='device', system_id=not_none(), deploy_mode='deploy', role=is_in(['leaf', 'spine']))",
        "data_type": "ns",
        "service_interval": "120",
        "service_name": "power_supply",
        "execution_count": "-1",
        "system_id": "device.system_id",
        "service_input": "\"\"",
        "key": "'power_supply_count'",
        "enable_streaming": false
      }
    },
    {
      "inputs": {},
      "type": "generic_data_collector",
      "name": "power_supply_fan_status_processor",
      "outputs": {
        "out": "power_supply_fan_status"
      },
      "properties": {
        "graph_query": "node('system', name='device', system_id=not_none(), deploy_mode='deploy', role=is_in(['leaf', 'spine']))",
        "data_type": "ns",
        "service_interval": "120",
        "service_name": "power_supply",
        "execution_count": "-1",
        "system_id": "device.system_id",
        "service_input": "\"\"",
        "key": "'power_supply_fan_status'",
        "enable_streaming": false,
        "value_map": {
          "0": "missing",
          "1": "ok",
          "2": "fault detected"
        }
      }
    },
    {
      "inputs": {},
      "type": "generic_data_collector",
      "name": "power_supply_info",
      "outputs": {
        "out": "power_supply_info"
      },
      "properties": {
        "graph_query": "node('system', name='device', system_id=not_none(), deploy_mode='deploy', role=is_in(['leaf', 'spine']))",
        "data_type": "ts",
        "service_interval": "120",
        "service_name": "power_supply",
        "execution_count": "-1",
        "system_id": "device.system_id",
        "service_input": "\"\"",
        "key": "'power_supply_info'",
        "enable_streaming": false
      }
    },
    {
      "inputs": {},
      "type": "generic_data_collector",
      "name": "power_supply_status_processor",
      "outputs": {
        "out": "power_supply_status"
      },
      "properties": {
        "graph_query": "node('system', name='device', system_id=not_none(), deploy_mode='deploy', role=is_in(['leaf', 'spine']))",
        "data_type": "ns",
        "service_interval": "120",
        "service_name": "power_supply",
        "execution_count": "-1",
        "system_id": "device.system_id",
        "service_input": "\"\"",
        "key": "'power_supply_status'",
        "enable_streaming": false,
        "value_map": {
          "0": "missing",
          "1": "ok",
          "2": "fault detected"
        }
      }
    },
    {
      "inputs": {},
      "type": "generic_data_collector",
      "name": "power_supply_temperature_status_processor",
      "outputs": {
        "out": "power_supply_temperature_status"
      },
      "properties": {
        "graph_query": "node('system', name='device', system_id=not_none(), deploy_mode='deploy', role=is_in(['leaf', 'spine']))",
        "data_type": "ns",
        "service_interval": "120",
        "service_name": "power_supply",
        "execution_count": "-1",
        "system_id": "device.system_id",
        "service_input": "\"\"",
        "key": "'power_supply_temperature_status'",
        "enable_streaming": false,
        "value_map": {
          "0": "missing",
          "1": "ok",
          "2": "fault detected"
        }
      }
    },
    {
      "inputs": {
        "in": "power_supply_count"
      },
      "type": "range_check",
      "name": "power_supply_count",
      "outputs": {
        "out": "insufficient_power_supplies"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "max": 1
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "power_supply_fan_status"
      },
      "type": "range_check",
      "name": "power_supply_fan_status_check",
      "outputs": {
        "out": "power_supply_fan_status_fault"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "min": 2
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "power_supply_fan_status"
      },
      "type": "range_check",
      "name": "power_supply_fan_status_check_missing",
      "outputs": {
        "out": "power_supply_fan_status_check_missing"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "max": 0
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "power_supply_status"
      },
      "type": "range_check",
      "name": "power_supply_status_check",
      "outputs": {
        "out": "power_supply_status_fault"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "min": 2
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "power_supply_status"
      },
      "type": "range_check",
      "name": "power_supply_status_check_missing",
      "outputs": {
        "out": "power_supply_status_check_missing"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "max": 0
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "power_supply_temperature_status"
      },
      "type": "range_check",
      "name": "power_supply_temperature_status_check",
      "outputs": {
        "out": "power_supply_temperature_status_fault"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "min": 2
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "power_supply_temperature_status"
      },
      "type": "range_check",
      "name": "power_supply_temperature_status_check_missing",
      "outputs": {
        "out": "power_supply_temperature_status_check_missing"
      },
      "properties": {
        "enable_streaming": false,
        "property": "value",
        "range": {
          "max": 0
        },
        "raise_anomaly": true,
        "graph_query": []
      }
    },
    {
      "inputs": {
        "in": "insufficient_power_supplies"
      },
      "type": "accumulate",
      "name": "power_supply_count Anomaly History",
      "outputs": {
        "out": "power_supply_anomaly_history"
      },
      "properties": {
        "enable_streaming": false,
        "max_samples": 50,
        "graph_query": [],
        "total_duration": 0
      }
    },
    {
      "inputs": {
        "in": "power_supply_fan_status_fault"
      },
      "type": "accumulate",
      "name": "power_supply_fan_status Fault Anomaly History",
      "outputs": {
        "out": "power_supply_fan_status_fault_anomaly_history"
      },
      "properties": {
        "enable_streaming": false,
        "max_samples": 50,
        "graph_query": [],
        "total_duration": 0
      }
    },
    {
      "inputs": {
        "in": "power_supply_status_fault"
      },
      "type": "accumulate",
      "name": "power_supply_status Fault Anomaly History",
      "outputs": {
        "out": "power_supply_status_fault_anomaly_history"
      },
      "properties": {
        "enable_streaming": false,
        "max_samples": 50,
        "graph_query": [],
        "total_duration": 0
      }
    },
    {
      "inputs": {
        "in": "power_supply_temperature_status_fault"
      },
      "type": "accumulate",
      "name": "power_supply_temperature_status Fault Anomaly History",
      "outputs": {
        "out": "power_supply_temperature_status_fault_anomaly_history"
      },
      "properties": {
        "enable_streaming": false,
        "max_samples": 50,
        "graph_query": [],
        "total_duration": 0
      }
    }
  ]
}