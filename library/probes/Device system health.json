{"label": "Device_Health - Device system health", "description": "This probe alerts if the system health parameters (CPU, memory and disk usage) exceed their specified thresholds for the specified duration.", "processors": [{"inputs": {}, "type": "extensible_data_collector", "name": "Disk utilization data", "outputs": {"out": "Disk utilization data"}, "properties": {"data_type": "ns", "graph_query": "node('system', name='system', role=is_in(['leaf', 'access', 'spine', 'superspine']), deploy_mode='deploy')", "service_interval": "120", "keys": ["metric"], "service_name": "disk_util", "metric": "'highest_utilized_partition_perc'", "execution_count": "-1", "system_id": "system.system_id", "service_input": "\"\"", "enable_streaming": false, "ingestion_filter": {}}}, {"inputs": {}, "type": "extensible_data_collector", "name": "Disk utilization data per partition", "outputs": {"out": "Disk utilization data per partition"}, "properties": {"data_type": "table_ns", "graph_query": "node('system', name='system', role=is_in(['leaf', 'access', 'spine', 'superspine']), deploy_mode='deploy')", "service_interval": "120", "keys": [], "service_name": "disk_util", "execution_count": "-1", "system_id": "system.system_id", "service_input": "\"\"", "enable_streaming": false, "ingestion_filter": {}}}, {"inputs": {}, "type": "extensible_data_collector", "name": "System cpu utilization data", "outputs": {"out": "System cpu utilization data"}, "properties": {"data_type": "ns", "graph_query": "node('system', name='system', role=is_in(['leaf', 'access', 'spine', 'superspine']), deploy_mode='deploy')", "service_interval": "10", "keys": ["metric"], "service_name": "resource_util", "metric": "'system_cpu_utilization'", "execution_count": "-1", "system_id": "system.system_id", "service_input": "\"\"", "enable_streaming": false, "ingestion_filter": {}}}, {"inputs": {}, "type": "extensible_data_collector", "name": "System memory utilization data", "outputs": {"out": "System memory utilization data"}, "properties": {"data_type": "ns", "graph_query": "node('system', name='system', role=is_in(['leaf', 'access', 'spine', 'superspine']), deploy_mode='deploy')", "service_interval": "10", "keys": ["metric"], "service_name": "resource_util", "metric": "'system_memory_utilization'", "execution_count": "-1", "system_id": "system.system_id", "service_input": "\"\"", "enable_streaming": false, "ingestion_filter": {}}}, {"inputs": {"in": "System cpu utilization data"}, "type": "range_check", "name": "Check cpu utilization threshold", "outputs": {"out": "Check cpu utilization threshold"}, "properties": {"graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "range": {"min": 81}, "raise_anomaly": false, "enable_streaming": false, "property": "value", "enable_anomaly_logging": false}}, {"inputs": {"in": "Disk utilization data"}, "type": "range_check", "name": "Check disk utilization threshold", "outputs": {"out": "Check disk utilization threshold"}, "properties": {"graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "range": {"min": 81}, "raise_anomaly": false, "enable_streaming": false, "property": "value", "enable_anomaly_logging": false}}, {"inputs": {"in": "System memory utilization data"}, "type": "range_check", "name": "Check memory utilization threshold", "outputs": {"out": "Check memory utilization threshold"}, "properties": {"graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "range": {"min": 81}, "raise_anomaly": false, "enable_streaming": false, "property": "value", "enable_anomaly_logging": false}}, {"inputs": {"in": "Check cpu utilization threshold"}, "type": "time_in_state_check", "name": "sustained cpu utilization beyond threshold", "outputs": {"out": "sustained_high_cpu_utilization"}, "properties": {"time_window": 660, "graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "state_range": {"\"true\"": [{"min": 361}]}, "raise_anomaly": true, "enable_streaming": false, "enable_anomaly_logging": false}}, {"inputs": {"in": "Check disk utilization threshold"}, "type": "time_in_state_check", "name": "sustained disk utilization beyond threshold", "outputs": {"out": "sustained_high_disk_utilization"}, "properties": {"time_window": 660, "graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "state_range": {"\"true\"": [{"min": 361}]}, "raise_anomaly": true, "enable_streaming": false, "enable_anomaly_logging": false}}, {"inputs": {"in": "Check memory utilization threshold"}, "type": "time_in_state_check", "name": "sustained memory utilization beyond threshold", "outputs": {"out": "sustained_high_memory_utilization"}, "properties": {"time_window": 660, "graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "state_range": {"\"true\"": [{"min": 361}]}, "raise_anomaly": true, "enable_streaming": false, "enable_anomaly_logging": false}}, {"inputs": {"in": "sustained_high_cpu_utilization"}, "type": "match_count", "name": "Systems with high CPU utilization", "outputs": {"out": "Systems with high CPU utilization"}, "properties": {"enable_streaming": false, "group_by": [], "reference_state": "true"}}, {"inputs": {"in": "sustained_high_disk_utilization"}, "type": "match_count", "name": "Systems with high disk utilization", "outputs": {"out": "Systems with high disk utilization"}, "properties": {"enable_streaming": false, "group_by": [], "reference_state": "true"}}, {"inputs": {"in": "sustained_high_memory_utilization"}, "type": "match_count", "name": "Systems with high memory utilization", "outputs": {"out": "Systems with high memory utilization"}, "properties": {"enable_streaming": false, "group_by": [], "reference_state": "true"}}], "stages": [{"name": "Systems with high memory utilization", "retention_duration": 86400}, {"name": "Check memory utilization threshold", "retention_duration": 86400}, {"name": "Systems with high disk utilization", "retention_duration": 86400}, {"name": "Check cpu utilization threshold", "retention_duration": 86400}, {"name": "sustained_high_cpu_utilization", "retention_duration": 86400}, {"name": "Disk utilization data", "retention_duration": 86400, "description": "Disk utilization percentage for the highest utilized partition", "units": "%"}, {"name": "Systems with high CPU utilization", "retention_duration": 86400}, {"name": "System memory utilization data", "retention_duration": 86400, "description": "System memory utilization percentage", "units": "%"}, {"name": "sustained_high_disk_utilization", "retention_duration": 86400}, {"name": "Disk utilization data per partition", "retention_duration": 86400, "description": "Disk utilization percentage per partition", "units": "%"}, {"name": "Check disk utilization threshold", "retention_duration": 86400}, {"name": "sustained_high_memory_utilization", "retention_duration": 86400}, {"name": "System cpu utilization data", "retention_duration": 86400, "description": "System cpu utilization percentage", "units": "%"}], "disabled": true}