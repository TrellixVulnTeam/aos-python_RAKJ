{"label": "Data_Plane - Physical interface status", "processors": [{"inputs": {}, "type": "service_data_collector", "name": "Collect physical interface state", "outputs": {"out": "physical_interface_state"}, "properties": {"description": "str(intf.description or 'facing %s' % (peer.hostname or peer.label or peer.role))", "graph_query": "match(node('system', name='system', system_id=not_none(), deploy_mode='deploy').out('hosted_interfaces').node('interface', name='intf', if_type=is_in(['ip', 'ethernet'])).out('link').node('link').in_('link').node('interface', name='peer_intf').in_('hosted_interfaces').node('system', name='peer').where(lambda peer: peer.role == 'external_router' or peer.deploy_mode == 'deploy')).ensure_different('system', 'peer')", "keys": ["interface"], "service_name": "interface", "interface": "str(intf.if_name)", "system_id": "system.system_id", "enable_streaming": false, "peer_hostname": "str(peer.hostname)"}}, {"inputs": {"in": "physical_interface_state"}, "type": "state_check", "name": "Inactive interfaces", "outputs": {"out": "physical_interface_down"}, "properties": {"graph_query": [], "anomaly_retention_size": 1073741824, "anomaly_retention_duration": 86400, "state": "['unknown', 'down', 'missing']", "raise_anomaly": true, "enable_streaming": false, "enable_anomaly_logging": false}}], "stages": [{"name": "physical_interface_state", "retention_duration": 86400}, {"name": "physical_interface_down", "retention_duration": 86400}], "disabled": true}