{"label": "Data_Plane - Physical interface status", "processors": [{"inputs": {}, "type": "service_data_collector", "name": "Collect physical interface state", "outputs": {"out": "physical_interface_state"}, "properties": {"description": "intf.description or 'facing %s' % (peer.hostname or peer.label or peer.role)", "graph_query": "match(node('system', name='system', system_id=not_none(), deploy_mode='deploy').out('hosted_interfaces').node('interface', name='intf', if_type=is_in(['ip', 'ethernet'])).out('link').node('link').in_('link').node('interface', name='peer_intf').in_('hosted_interfaces').node('system', name='peer').where(lambda peer: peer.role == 'external_router' or peer.deploy_mode == 'deploy')).ensure_different('system', 'peer')", "service_name": "interface", "system_id": "system.system_id", "key": "intf.if_name", "enable_streaming": false, "peer_hostname": "peer.hostname"}}, {"inputs": {"in": "physical_interface_state"}, "type": "state_check", "name": "Inactive interfaces", "outputs": {"out": "physical_interface_down"}, "properties": {"enable_streaming": false, "state": "['unknown', 'down', 'missing']", "raise_anomaly": true, "graph_query": []}}, {"inputs": {"in": "physical_interface_down"}, "type": "accumulate", "name": "physical interface state history", "outputs": {"out": "physical_interface_down_anomaly_history"}, "properties": {"enable_streaming": false, "max_samples": 50, "graph_query": [], "total_duration": 0}}], "disabled": true}